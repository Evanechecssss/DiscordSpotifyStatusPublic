# DiscordSpotifyStatus

## Установка
1) Скачайте проект и установите необходимые модули из файла requirements.txt.
2) Откройте консоль приложения Discord (Ctrl + Shift + I) и выполните следующий скрипт:
(webpackChunkdiscord_app.push([[''],{},e=>{m=[];for(let c in e.c)m.push(e.c[c])}]),m).find(m=>m?.exports?.default?.getToken!==void 0).exports.default.getToken()

Скопируйте полученный токен в текстовый файл.
3) Если консоль недоступна в приложении, внесите изменения в настройки Discord:
   - Перейдите по пути %APPDATA%\discord\settings.json
   - Добавьте следующий ключ перед WINDOW_BOUNDS: "DANGEROUS_ENABLE_DEVTOOLS_ONLY_ENABLE_IF_YOU_KNOW_WHAT_YOURE_DOING": true,
   - Вернитесь к шагу 2.
4) Перейдите на веб-сайт [Spotify](https://open.spotify.com), выполните вход, откройте консоль (Ctrl + Shift + I), перейдите на вкладку "Application", "Storage", "Cookie files", "..spotify...".
Найдите файлы cookie, введите sp_dc в поиск и скопируйте токен в текстовый файл.
5) В скачанном репозитории найдите файл data.json и вставьте полученные данные в соответствующие места.
6) Откройте файл discord_spotify_status.py, и теперь вы можете запустить программу.

## Применение
Программа работает на основе определенной цепи веб-запросов. Из-за сетевых задержек может потребоваться перезапуск программы.
Программа устанавливает строку эмодзи для песен. В файле tracks.json вы можете установить, какие эмодзи должны быть ассоциированы с определенными альбомами (см. примеры в файле). Чтобы получить идентификатор альбома, скопируйте прямую ссылку на альбом; идентификатор будет находиться перед ? и после \.